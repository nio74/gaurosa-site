(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63488,e=>{"use strict";let a=(0,e.i(75254).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["Mail",()=>a],63488)},18566,(e,a,s)=>{a.exports=e.r(76562)},31278,e=>{"use strict";let a=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>a],31278)},90597,e=>{"use strict";let a=(0,e.i(75254).default)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]);e.s(["Heart",()=>a],90597)},19172,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(18566),r=e.i(22016),i=e.i(46932),l=e.i(84614),n=e.i(63488),o=e.i(75254);let c=(0,o.default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),d=(0,o.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),m=(0,o.default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var u=e.i(31278);let x=(0,o.default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),h=(0,o.default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);var y=e.i(90597);let p=(0,o.default)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var g=e.i(59544);function f(){let e=(0,t.useRouter)(),[o,f]=(0,s.useState)(!0),[b,j]=(0,s.useState)(!1),[N,w]=(0,s.useState)(!0),[v,k]=(0,s.useState)(null),[C,M]=(0,s.useState)(!1),[z,P]=(0,s.useState)(""),[S,T]=(0,s.useState)(""),[q,A]=(0,s.useState)({email:"",password:"",firstName:"",lastName:"",phone:"",confirmPassword:"",marketingConsent:!1});(0,s.useEffect)(()=>{!async function(){try{let e=await fetch("/api/auth/me",{credentials:"include"}),a=await e.json();a.success&&a.user&&k(a.user)}catch{}finally{w(!1)}}()},[]);let O=async e=>{e.preventDefault(),P(""),T(""),j(!0);try{if(o){let e=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:q.email,password:q.password})}),a=await e.json();a.success?(k(a.user),T("Accesso effettuato!")):P(a.error||"Credenziali non valide")}else{if(q.password!==q.confirmPassword){P("Le password non coincidono"),j(!1);return}let e=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:q.email,password:q.password,firstName:q.firstName,lastName:q.lastName,phone:q.phone,marketingConsent:q.marketingConsent})}),a=await e.json();if(a.success)T("Registrazione completata! Controlla la tua email per verificare l'account."),setTimeout(()=>f(!0),3e3);else{let e=a.errors;if(e){let a=Object.values(e).join(". ");P(a)}else P(a.error||"Errore durante la registrazione")}}}catch{P("Errore di connessione. Riprova più tardi.")}finally{j(!1)}},R=async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"}),k(null),e.refresh()}catch{P("Errore durante il logout")}},E=e=>{let{name:a,value:s,type:t,checked:r}=e.target;A(e=>({...e,[a]:"checkbox"===t?r:s}))};return N?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)(u.Loader2,{className:"w-8 h-8 animate-spin text-gray-400"})}):v?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-4xl mx-auto",children:[(0,a.jsx)("div",{className:"bg-white rounded-xl p-6 shadow-sm mb-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(l.User,{className:"w-8 h-8 text-gray-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:["Ciao, ",v.firstName||"Cliente","!"]}),(0,a.jsx)("p",{className:"text-gray-500",children:v.email}),!v.emailVerified&&(0,a.jsx)("p",{className:"text-amber-600 text-sm mt-1",children:"Email non verificata - controlla la tua casella"})]})]}),(0,a.jsxs)(g.default,{variant:"outline",onClick:R,children:[(0,a.jsx)(x,{className:"w-4 h-4 mr-2"}),"Esci"]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsx)(r.default,{href:"/account/ordini",className:"block",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow",children:[(0,a.jsx)(h,{className:"w-8 h-8 text-gray-400 mb-3"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"I miei ordini"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Visualizza lo storico ordini"})]})}),(0,a.jsx)(r.default,{href:"/account/preferiti",className:"block",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow",children:[(0,a.jsx)(y.Heart,{className:"w-8 h-8 text-gray-400 mb-3"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Preferiti"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"I tuoi prodotti salvati"})]})}),(0,a.jsx)(r.default,{href:"/account/impostazioni",className:"block",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow",children:[(0,a.jsx)(p,{className:"w-8 h-8 text-gray-400 mb-3"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Impostazioni"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Modifica i tuoi dati"})]})})]})]})})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4",children:(0,a.jsx)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-8",children:[(0,a.jsxs)("div",{className:"flex mb-8",children:[(0,a.jsx)("button",{onClick:()=>{f(!0),P(""),T("")},className:`flex-1 pb-3 text-center font-medium transition-colors border-b-2 ${o?"text-gray-900 border-gray-900":"text-gray-400 border-transparent hover:text-gray-600"}`,children:"Accedi"}),(0,a.jsx)("button",{onClick:()=>{f(!1),P(""),T("")},className:`flex-1 pb-3 text-center font-medium transition-colors border-b-2 ${!o?"text-gray-900 border-gray-900":"text-gray-400 border-transparent hover:text-gray-600"}`,children:"Registrati"})]}),z&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-600 text-sm",children:z}),S&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg text-green-600 text-sm",children:S}),(0,a.jsxs)("form",{onSubmit:O,className:"space-y-4",children:[!o&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome *"}),(0,a.jsx)("input",{type:"text",name:"firstName",value:q.firstName,onChange:E,required:!o,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cognome *"}),(0,a.jsx)("input",{type:"text",name:"lastName",value:q.lastName,onChange:E,required:!o,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefono *"}),(0,a.jsx)("input",{type:"tel",name:"phone",value:q.phone,onChange:E,required:!o,placeholder:"+39 123 456 7890",className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(n.Mail,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:"email",name:"email",value:q.email,onChange:E,required:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:C?"text":"password",name:"password",value:q.password,onChange:E,required:!0,minLength:8,className:"w-full pl-10 pr-10 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent"}),(0,a.jsx)("button",{type:"button",onClick:()=>M(!C),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:C?(0,a.jsx)(m,{className:"w-5 h-5"}):(0,a.jsx)(d,{className:"w-5 h-5"})})]}),!o&&(0,a.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Minimo 8 caratteri, almeno una lettera maiuscola e un numero"})]}),!o&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Conferma Password *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:C?"text":"password",name:"confirmPassword",value:q.confirmPassword,onChange:E,required:!o,className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent"})]})]}),!o&&(0,a.jsxs)("label",{className:"flex items-start gap-3",children:[(0,a.jsx)("input",{type:"checkbox",name:"marketingConsent",checked:q.marketingConsent,onChange:E,className:"mt-1 w-4 h-4 rounded border-gray-300 text-gray-900 focus:ring-gray-900"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Desidero ricevere offerte esclusive e novità via email"})]}),o&&(0,a.jsx)("div",{className:"text-right",children:(0,a.jsx)(r.default,{href:"/account/password-dimenticata",className:"text-sm text-gray-600 hover:text-gray-900",children:"Password dimenticata?"})}),(0,a.jsx)(g.default,{type:"submit",size:"lg",className:"w-full",disabled:b,children:b?(0,a.jsx)(u.Loader2,{className:"w-5 h-5 animate-spin"}):o?"Accedi":"Registrati"})]}),!o&&(0,a.jsxs)("p",{className:"mt-4 text-xs text-gray-500 text-center",children:["Registrandoti accetti i nostri"," ",(0,a.jsx)(r.default,{href:"/termini",className:"underline",children:"Termini e Condizioni"})," ","e la"," ",(0,a.jsx)(r.default,{href:"/privacy",className:"underline",children:"Privacy Policy"})]})]})})})}e.s(["default",()=>f],19172)}]);