# gaurosa.it - Static Next.js routing (no PHP for pages)
RewriteEngine On
RewriteBase /

# 1. Bypass: API PHP files (serve directly)
RewriteRule ^api-[^/]+\.php$ - [L]
RewriteRule ^api/ - [L]
RewriteRule ^maintenance\.html$ - [L]
RewriteRule ^maintenance\.json$ - [L]

# 2. If the exact file exists, serve it (HTML, JS, CSS, images, txt)
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^ - [L]

# 3. Add trailing slash to directories (redirect)
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^(.+[^/])$ $1/ [R=301,L]

# 4. Try /path/index.html (Next.js static pages with trailingSlash)
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI}/index.html -f
RewriteRule ^(.+[^/])$ $1/index.html [L]

# 5. Try /path.html
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI}.html -f
RewriteRule ^(.+)$ $1.html [L]

# 6. Fallback: 404
ErrorDocument 404 /404.html
