(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,69638,e=>{"use strict";let s=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>s],69638)},88844,e=>{"use strict";let s=(0,e.i(75254).default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);e.s(["Package",()=>s],88844)},31278,e=>{"use strict";let s=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>s],31278)},3116,e=>{"use strict";let s=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>s],3116)},61659,e=>{"use strict";let s=(0,e.i(75254).default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);e.s(["CreditCard",()=>s],61659)},15788,e=>{"use strict";let s=(0,e.i(75254).default)("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);e.s(["Truck",()=>s],15788)},71689,e=>{"use strict";let s=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>s],71689)},86536,e=>{"use strict";let s=(0,e.i(75254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>s],86536)},73884,e=>{"use strict";let s=(0,e.i(75254).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>s],73884)},50627,e=>{"use strict";let s=(0,e.i(75254).default)("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);e.s(["Receipt",()=>s],50627)},9401,e=>{"use strict";var s=e.i(43476),a=e.i(71645),t=e.i(18566),i=e.i(22016),r=e.i(46932),l=e.i(88653),c=e.i(88844),d=e.i(71689),n=e.i(75254);let o=(0,n.default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var m=e.i(61659),x=e.i(15788),h=e.i(69638),p=e.i(73884),g=e.i(3116);let u=(0,n.default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var y=e.i(50627),j=e.i(31278),b=e.i(50965),f=e.i(86536),N=e.i(59544),v=e.i(75157);function w({status:e}){let a={pending:{label:"In attesa",color:"bg-amber-100 text-amber-800 border-amber-200"},processing:{label:"In preparazione",color:"bg-blue-100 text-blue-800 border-blue-200"},shipped:{label:"Spedito",color:"bg-purple-100 text-purple-800 border-purple-200"},completed:{label:"Completato",color:"bg-green-100 text-green-800 border-green-200"},cancelled:{label:"Annullato",color:"bg-gray-100 text-gray-800 border-gray-200"}},t=a[e]||a.pending;return(0,s.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${t.color}`,children:t.label})}function k({status:e}){let a={paid:{label:"Pagato",color:"bg-green-100 text-green-800 border-green-200",icon:h.CheckCircle},pending:{label:"In attesa",color:"bg-amber-100 text-amber-800 border-amber-200",icon:g.Clock},failed:{label:"Fallito",color:"bg-red-100 text-red-800 border-red-200",icon:p.XCircle},refunded:{label:"Rimborsato",color:"bg-gray-100 text-gray-800 border-gray-200",icon:y.Receipt},partially_refunded:{label:"Rimborso parziale",color:"bg-gray-100 text-gray-800 border-gray-200",icon:y.Receipt}},t=a[e]||a.pending,i=t.icon;return(0,s.jsxs)("span",{className:`inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium border ${t.color}`,children:[(0,s.jsx)(i,{className:"w-3 h-3"}),t.label]})}function z({order:e}){let a=[{key:"ordered",label:"Ordinato",date:e.date,completed:!0,icon:b.ShoppingBag},{key:"paid",label:"Pagato",date:e.paidDate,completed:"paid"===e.paymentStatus,icon:m.CreditCard},{key:"processing",label:"In preparazione",date:null,completed:["processing","shipped","completed"].includes(e.status),icon:c.Package},{key:"shipped",label:"Spedito",date:e.shippedDate,completed:["shipped","completed"].includes(e.status),icon:x.Truck},{key:"delivered",label:"Consegnato",date:e.completedDate,completed:"completed"===e.status,icon:h.CheckCircle}];return(0,s.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Stato dell'ordine"}),(0,s.jsx)("div",{className:"space-y-4",children:a.map((e,t)=>{let i=e.icon,r=t===a.length-1;return(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${e.completed?"bg-green-100 text-green-600 border-2 border-green-200":"bg-gray-100 text-gray-400 border-2 border-gray-200"}`,children:(0,s.jsx)(i,{className:"w-5 h-5"})}),!r&&(0,s.jsx)("div",{className:`w-0.5 h-8 mt-2 ${e.completed?"bg-green-200":"bg-gray-200"}`})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:`text-sm font-medium ${e.completed?"text-gray-900":"text-gray-500"}`,children:e.label}),e.date&&(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.date})]})]},e.key)})})]})}function C({previews:e}){let a=Math.max(0,e.length-3);return(0,s.jsxs)("div",{className:"flex -space-x-2",children:[e.slice(0,3).map((e,a)=>(0,s.jsx)("div",{className:"w-10 h-10 rounded-full border-2 border-white bg-gray-100 flex items-center justify-center overflow-hidden",title:e.name,children:e.thumb?(0,s.jsx)("img",{src:`${e.thumb}`,alt:e.name,className:"w-full h-full object-cover"}):(0,s.jsx)(c.Package,{className:"w-4 h-4 text-gray-400"})},a)),a>0&&(0,s.jsx)("div",{className:"w-10 h-10 rounded-full border-2 border-white bg-gray-200 flex items-center justify-center",children:(0,s.jsxs)("span",{className:"text-xs font-medium text-gray-600",children:["+",a]})})]})}function M(){let e=(0,t.useRouter)(),[n,m]=(0,a.useState)(!0),[x,h]=(0,a.useState)([]),[p,g]=(0,a.useState)(null),[y,M]=(0,a.useState)(!1),[A,P]=(0,a.useState)("");(0,a.useEffect)(()=>{!async function(){try{let s=await fetch("/api/auth/me",{credentials:"include"}),a=await s.json();if(!a.success||!a.user)return void e.push("/account");let t=await fetch("/api/orders",{credentials:"include"}),i=await t.json();i.success?h(i.orders):P("Errore nel caricamento degli ordini")}catch(e){console.error("Error initializing page:",e),P("Errore di connessione")}finally{m(!1)}}()},[e]);let S=async e=>{M(!0);try{let s=await fetch(`/api/orders?id=${e}`,{credentials:"include"}),a=await s.json();a.success?g(a.order):P("Errore nel caricamento del dettaglio ordine")}catch(e){console.error("Error fetching order detail:",e),P("Errore di connessione")}finally{M(!1)}};return n?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(j.Loader2,{className:"w-8 h-8 animate-spin text-brand-rose mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Caricamento ordini..."})]})}):p?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,s.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,s.jsxs)(r.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("nav",{className:"flex items-center gap-2 text-sm text-gray-500 mb-6",children:[(0,s.jsx)(i.default,{href:"/account",className:"hover:text-gray-700",children:"Account"}),(0,s.jsx)("span",{children:"/"}),(0,s.jsx)("button",{onClick:()=>g(null),className:"hover:text-gray-700",children:"I miei ordini"}),(0,s.jsx)("span",{children:"/"}),(0,s.jsx)("span",{className:"text-gray-900",children:p.orderNumber})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[(0,s.jsx)(N.default,{variant:"ghost",size:"sm",onClick:()=>g(null),className:"p-2",children:(0,s.jsx)(d.ArrowLeft,{className:"w-4 h-4"})}),(0,s.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:["Ordine ",p.orderNumber]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(o,{className:"w-4 h-4"}),p.date]}),(0,s.jsx)(w,{status:p.status}),(0,s.jsx)(k,{status:p.paymentStatus})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(0,v.formatPrice)(p.total)}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[p.items.length," ",1===p.items.length?"articolo":"articoli"]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(z,{order:p}),p.trackingNumber&&(0,s.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Tracciamento spedizione"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Numero di tracciamento"}),(0,s.jsx)("p",{className:"text-sm text-gray-900 font-mono",children:p.trackingNumber})]}),p.trackingUrl&&(0,s.jsxs)(N.default,{variant:"outline",size:"sm",onClick:()=>window.open(p.trackingUrl,"_blank"),className:"w-full",children:[(0,s.jsx)(u,{className:"w-4 h-4 mr-2"}),"Traccia spedizione"]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Indirizzo di spedizione"}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,s.jsxs)("p",{className:"font-medium text-gray-900",children:[p.shippingAddress.firstName," ",p.shippingAddress.lastName]}),(0,s.jsx)("p",{children:p.shippingAddress.address}),(0,s.jsxs)("p",{children:[p.shippingAddress.postalCode," ",p.shippingAddress.city," (",p.shippingAddress.province,")"]}),(0,s.jsx)("p",{children:p.shippingAddress.country})]})]})]}),(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[(0,s.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Articoli ordinati"})}),(0,s.jsx)("div",{className:"divide-y divide-gray-100",children:p.items.map(e=>(0,s.jsxs)("div",{className:"p-6 flex gap-4",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center overflow-hidden flex-shrink-0",children:e.thumb?(0,s.jsx)("img",{src:`${e.thumb}`,alt:e.productName,className:"w-full h-full object-cover"}):(0,s.jsx)(c.Package,{className:"w-6 h-6 text-gray-400"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900 mb-1",children:e.productName}),(0,s.jsxs)("div",{className:"text-sm text-gray-500 space-y-1",children:[(0,s.jsxs)("p",{children:["Codice: ",e.productCode]}),e.variantName&&(0,s.jsxs)("p",{children:["Variante: ",e.variantName]}),e.orderedSize&&(0,s.jsxs)("p",{children:["Misura: ",e.orderedSize]})]})]}),(0,s.jsxs)("div",{className:"text-right flex-shrink-0",children:[(0,s.jsx)("p",{className:"font-medium text-gray-900",children:(0,v.formatPrice)(e.totalPrice)}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[(0,v.formatPrice)(e.unitPrice)," × ",e.quantity]})]})]},e.id))})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Riepilogo ordine"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Subtotale"}),(0,s.jsx)("span",{className:"text-gray-900",children:(0,v.formatPrice)(p.subtotal)})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Spedizione"}),(0,s.jsx)("span",{className:"text-gray-900",children:(0,v.formatPrice)(p.shippingTotal)})]}),p.taxTotal>0&&(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"IVA"}),(0,s.jsx)("span",{className:"text-gray-900",children:(0,v.formatPrice)(p.taxTotal)})]}),p.discountTotal>0&&(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Sconto"}),(0,s.jsxs)("span",{className:"text-green-600",children:["-",(0,v.formatPrice)(p.discountTotal)]})]}),(0,s.jsx)("div",{className:"border-t border-gray-200 pt-3",children:(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:"Totale"}),(0,s.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:(0,v.formatPrice)(p.total)})]})})]}),(0,s.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Metodo di pagamento:"})," ",p.paymentMethod]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Metodo di spedizione:"})," ",p.shippingMethod]}),p.invoiceNumber&&(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Fattura:"})," ",p.invoiceNumber]})]})})]})]})]})]})})}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,s.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,s.jsxs)(r.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("nav",{className:"flex items-center gap-2 text-sm text-gray-500 mb-6",children:[(0,s.jsx)(i.default,{href:"/account",className:"hover:text-gray-700",children:"Account"}),(0,s.jsx)("span",{children:"/"}),(0,s.jsx)("span",{className:"text-gray-900",children:"I miei ordini"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"I miei ordini"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"Visualizza e gestisci i tuoi ordini"})]}),(0,s.jsxs)(N.default,{variant:"outline",onClick:()=>e.push("/account"),children:[(0,s.jsx)(d.ArrowLeft,{className:"w-4 h-4 mr-2"}),"Torna all'account"]})]}),A&&(0,s.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-600",children:A}),0===x.length?(0,s.jsxs)(r.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center py-16",children:[(0,s.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,s.jsx)(c.Package,{className:"w-12 h-12 text-gray-400"})}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Nessun ordine trovato"}),(0,s.jsx)("p",{className:"text-gray-500 mb-8 max-w-md mx-auto",children:"Non hai ancora effettuato nessun ordine. Scopri la nostra collezione di gioielli e orologi."}),(0,s.jsxs)(N.default,{onClick:()=>e.push("/prodotti"),size:"lg",children:[(0,s.jsx)(b.ShoppingBag,{className:"w-5 h-5 mr-2"}),"Inizia a comprare"]})]}):(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsx)(l.AnimatePresence,{children:x.map((e,a)=>(0,s.jsx)(r.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*a},className:"bg-white rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>S(e.id),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(C,{previews:e.previews}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"font-semibold text-gray-900 mb-1",children:["Ordine ",e.orderNumber]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-500",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(o,{className:"w-4 h-4"}),e.date]}),(0,s.jsx)("span",{children:"•"}),(0,s.jsxs)("span",{children:[e.itemCount," ",1===e.itemCount?"articolo":"articoli"]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-6",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)(w,{status:e.status}),(0,s.jsx)(k,{status:e.paymentStatus})]}),e.trackingNumber&&"shipped"===e.status&&(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Tracciamento disponibile"})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-xl font-bold text-gray-900",children:(0,v.formatPrice)(e.total)}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:e.paymentMethod})]}),(0,s.jsx)(N.default,{variant:"outline",size:"sm",disabled:y,children:y?(0,s.jsx)(j.Loader2,{className:"w-4 h-4 animate-spin"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.Eye,{className:"w-4 h-4 mr-2"}),"Dettagli"]})})]})]})},e.id))})})]})})})}e.s(["default",()=>M],9401)}]);