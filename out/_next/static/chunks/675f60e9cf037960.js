(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31278,e=>{"use strict";let a=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>a],31278)},88844,e=>{"use strict";let a=(0,e.i(75254).default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);e.s(["Package",()=>a],88844)},63488,e=>{"use strict";let a=(0,e.i(75254).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["Mail",()=>a],63488)},90597,e=>{"use strict";let a=(0,e.i(75254).default)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]);e.s(["Heart",()=>a],90597)},86536,e=>{"use strict";let a=(0,e.i(75254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>a],86536)},19172,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(18566),r=e.i(22016),i=e.i(46932),l=e.i(84614),n=e.i(63488),o=e.i(75254);let c=(0,o.default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var d=e.i(86536);let m=(0,o.default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var u=e.i(31278);let x=(0,o.default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var h=e.i(88844),p=e.i(90597);let f=(0,o.default)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var g=e.i(59544);e.i(47167);let y="201125091939-de8vp9jcu4lnlqs63133e35iec4i7sj8.apps.googleusercontent.com";function b({onSuccess:e,onError:s}){let[r,i]=(0,t.useState)(!1),[l,n]=(0,t.useState)(!1),o=(0,t.useRef)(null),c=(0,t.useCallback)(async a=>{if(!a.credential)return void s?.("Risposta Google non valida");i(!0);try{let t=await fetch("/api/api/auth/google.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({credential:a.credential})}),r=await t.json();r.success?e?.(r.user):s?.(r.error||"Errore durante l'accesso con Google")}catch(e){console.error("Google auth error:",e),s?.("Errore di connessione. Riprova.")}finally{i(!1)}},[e,s]);return(0,t.useEffect)(()=>{if(window.google?.accounts?.id)return void n(!0);let e=document.createElement("script");return e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.onload=()=>n(!0),document.head.appendChild(e),()=>{}},[]),(0,t.useEffect)(()=>{l&&y&&window.google?.accounts?.id&&(window.google.accounts.id.initialize({client_id:y,callback:c,auto_select:!1,cancel_on_tap_outside:!0}),o.current&&window.google.accounts.id.renderButton(o.current,{type:"standard",theme:"outline",size:"large",text:"continue_with",shape:"rectangular",logo_alignment:"left",width:o.current.offsetWidth,locale:"it"}))},[l,c]),(0,a.jsx)("div",{className:"space-y-3",children:(0,a.jsxs)("div",{className:"relative",children:[r&&(0,a.jsx)("div",{className:"absolute inset-0 bg-white/80 flex items-center justify-center rounded-lg z-10",children:(0,a.jsx)(u.Loader2,{className:"w-5 h-5 animate-spin text-gray-500"})}),(0,a.jsx)("div",{ref:o,className:"w-full flex justify-center"}),!l&&(0,a.jsxs)("button",{disabled:!0,className:"w-full flex items-center justify-center gap-3 px-4 py-2.5 border border-gray-200 rounded-lg bg-white text-gray-500 text-sm font-medium opacity-50",children:[(0,a.jsx)(j,{}),"Caricamento..."]})]})})}function j(){return(0,a.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844a4.14 4.14 0 01-1.796 2.716v2.259h2.908c1.702-1.567 2.684-3.875 2.684-6.615z",fill:"#4285F4"}),(0,a.jsx)("path",{d:"M9 18c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332A8.997 8.997 0 009 18z",fill:"#34A853"}),(0,a.jsx)("path",{d:"M3.964 10.71A5.41 5.41 0 013.682 9c0-.593.102-1.17.282-1.71V4.958H.957A8.996 8.996 0 000 9c0 1.452.348 2.827.957 4.042l3.007-2.332z",fill:"#FBBC05"}),(0,a.jsx)("path",{d:"M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0A8.997 8.997 0 00.957 4.958L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z",fill:"#EA4335"})]})}function v(){let e=(0,s.useRouter)(),[o,y]=(0,t.useState)(!0),[j,v]=(0,t.useState)(!1),[N,w]=(0,t.useState)(!0),[k,C]=(0,t.useState)(null),[z,P]=(0,t.useState)(!1),[M,S]=(0,t.useState)(""),[A,E]=(0,t.useState)(""),[T,q]=(0,t.useState)({email:"",password:"",firstName:"",lastName:"",phone:"",confirmPassword:"",privacyConsent:!1,marketingConsent:!1});(0,t.useEffect)(()=>{!async function(){try{let e=await fetch("/api/auth/me",{credentials:"include"}),a=await e.json();a.success&&a.user&&C(a.user)}catch{}finally{w(!1)}}()},[]);let O=async e=>{e.preventDefault(),S(""),E(""),v(!0);try{if(o){let e=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:T.email,password:T.password})}),a=await e.json();a.success?(C(a.user),E("Accesso effettuato!")):S(a.error||"Credenziali non valide")}else{if(!T.privacyConsent){S("Devi accettare la Privacy Policy per registrarti"),v(!1);return}if(T.password!==T.confirmPassword){S("Le password non coincidono"),v(!1);return}let e=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:T.email,password:T.password,firstName:T.firstName,lastName:T.lastName,phone:T.phone,privacyConsent:T.privacyConsent,marketingConsent:T.marketingConsent})}),a=await e.json();if(a.success)E("Registrazione completata! Controlla la tua email per verificare l'account."),setTimeout(()=>y(!0),3e3);else{let e=a.errors;if(e){let a=Object.values(e).join(". ");S(a)}else S(a.error||"Errore durante la registrazione")}}}catch{S("Errore di connessione. Riprova più tardi.")}finally{v(!1)}},R=async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"}),C(null),e.refresh()}catch{S("Errore durante il logout")}},L=e=>{let{name:a,value:t,type:s,checked:r}=e.target;q(e=>({...e,[a]:"checkbox"===s?r:t}))};return N?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)(u.Loader2,{className:"w-8 h-8 animate-spin text-gray-400"})}):k?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-4xl mx-auto",children:[(0,a.jsx)("div",{className:"bg-white rounded-xl p-6 shadow-sm mb-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[k.avatarUrl?(0,a.jsx)("img",{src:k.avatarUrl,alt:"Avatar",className:"w-16 h-16 rounded-full object-cover",referrerPolicy:"no-referrer"}):(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(l.User,{className:"w-8 h-8 text-gray-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:["Ciao, ",k.firstName||"Cliente","!"]}),(0,a.jsx)("p",{className:"text-gray-500",children:k.email}),!k.emailVerified&&(0,a.jsx)("p",{className:"text-amber-600 text-sm mt-1",children:"Email non verificata - controlla la tua casella"})]})]}),(0,a.jsxs)(g.default,{variant:"outline",onClick:R,children:[(0,a.jsx)(x,{className:"w-4 h-4 mr-2"}),"Esci"]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsx)(r.default,{href:"/account/ordini",className:"block",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow",children:[(0,a.jsx)(h.Package,{className:"w-8 h-8 text-gray-400 mb-3"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"I miei ordini"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Visualizza lo storico ordini"})]})}),(0,a.jsx)(r.default,{href:"/account/preferiti",className:"block",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow",children:[(0,a.jsx)(p.Heart,{className:"w-8 h-8 text-gray-400 mb-3"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Preferiti"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"I tuoi prodotti salvati"})]})}),(0,a.jsx)(r.default,{href:"/account/impostazioni",className:"block",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow",children:[(0,a.jsx)(f,{className:"w-8 h-8 text-gray-400 mb-3"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Impostazioni"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Modifica i tuoi dati"})]})})]})]})})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4",children:(0,a.jsx)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-8",children:[(0,a.jsxs)("div",{className:"flex mb-8",children:[(0,a.jsx)("button",{onClick:()=>{y(!0),S(""),E("")},className:`flex-1 pb-3 text-center font-medium transition-colors border-b-2 ${o?"text-brand-rose border-brand-rose":"text-gray-400 border-transparent hover:text-gray-600"}`,children:"Accedi"}),(0,a.jsx)("button",{onClick:()=>{y(!1),S(""),E("")},className:`flex-1 pb-3 text-center font-medium transition-colors border-b-2 ${!o?"text-brand-rose border-brand-rose":"text-gray-400 border-transparent hover:text-gray-600"}`,children:"Registrati"})]}),M&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-600 text-sm",children:M}),A&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg text-green-600 text-sm",children:A}),(0,a.jsxs)("form",{onSubmit:O,className:"space-y-4",children:[!o&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome *"}),(0,a.jsx)("input",{type:"text",name:"firstName",value:T.firstName,onChange:L,required:!o,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-rose focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cognome *"}),(0,a.jsx)("input",{type:"text",name:"lastName",value:T.lastName,onChange:L,required:!o,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-rose focus:border-transparent"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefono *"}),(0,a.jsx)("input",{type:"tel",name:"phone",value:T.phone,onChange:L,required:!o,placeholder:"+39 123 456 7890",className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-rose focus:border-transparent"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(n.Mail,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:"email",name:"email",value:T.email,onChange:L,required:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-rose focus:border-transparent"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:z?"text":"password",name:"password",value:T.password,onChange:L,required:!0,minLength:8,className:"w-full pl-10 pr-10 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-rose focus:border-transparent"}),(0,a.jsx)("button",{type:"button",onClick:()=>P(!z),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:z?(0,a.jsx)(m,{className:"w-5 h-5"}):(0,a.jsx)(d.Eye,{className:"w-5 h-5"})})]}),!o&&(0,a.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Minimo 8 caratteri, almeno una lettera maiuscola e un numero"})]}),!o&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Conferma Password *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:z?"text":"password",name:"confirmPassword",value:T.confirmPassword,onChange:L,required:!o,className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-rose focus:border-transparent"})]})]}),!o&&(0,a.jsxs)("label",{className:"flex items-start gap-3",children:[(0,a.jsx)("input",{type:"checkbox",name:"privacyConsent",checked:T.privacyConsent,onChange:L,required:!0,className:"mt-1 w-4 h-4 rounded border-gray-300 text-brand-rose focus:ring-brand-rose"}),(0,a.jsxs)("span",{className:"text-sm text-gray-700",children:["Ho letto e accetto la"," ",(0,a.jsx)(r.default,{href:"/privacy",className:"text-brand-rose underline hover:text-brand-rose-dark",target:"_blank",children:"Privacy Policy"})," ","e i"," ",(0,a.jsx)(r.default,{href:"/termini",className:"text-brand-rose underline hover:text-brand-rose-dark",target:"_blank",children:"Termini e Condizioni"})," ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]})]}),!o&&(0,a.jsxs)("label",{className:"flex items-start gap-3",children:[(0,a.jsx)("input",{type:"checkbox",name:"marketingConsent",checked:T.marketingConsent,onChange:L,className:"mt-1 w-4 h-4 rounded border-gray-300 text-brand-rose focus:ring-brand-rose"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Desidero ricevere offerte esclusive e novità via email"})]}),o&&(0,a.jsx)("div",{className:"text-right",children:(0,a.jsx)(r.default,{href:"/account/password-dimenticata",className:"text-sm text-gray-600 hover:text-gray-900",children:"Password dimenticata?"})}),(0,a.jsx)(g.default,{type:"submit",size:"lg",className:"w-full",disabled:j,children:j?(0,a.jsx)(u.Loader2,{className:"w-5 h-5 animate-spin"}):o?"Accedi":"Registrati"})]}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,a.jsx)("div",{className:"w-full border-t border-gray-200"})}),(0,a.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,a.jsx)("span",{className:"bg-white px-4 text-gray-400",children:"oppure"})})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(b,{onSuccess:e=>{C(e),E("Accesso effettuato!"),S("")},onError:e=>{S(e),E("")}})}),(0,a.jsxs)("p",{className:"mt-3 text-xs text-gray-400 text-center",children:["Continuando con Google accetti i nostri"," ",(0,a.jsx)(r.default,{href:"/termini",className:"underline hover:text-gray-600",children:"Termini e Condizioni"})," ","e la"," ",(0,a.jsx)(r.default,{href:"/privacy",className:"underline hover:text-gray-600",children:"Privacy Policy"})]})]}),!o&&(0,a.jsxs)("p",{className:"mt-4 text-xs text-gray-400 text-center",children:["I campi contrassegnati con ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})," sono obbligatori"]})]})})})}e.s(["default",()=>v],19172)}]);